
<!-- <mat-accordion class="example-headers-align dropdown sticky-top" multi>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title class="exp-title">
        <button mat-icon-button type="button" class="icon-btn">
          <mat-icon matPrefix class="mb-1 icon">filter_list</mat-icon>
        </button>
        &nbsp;&nbsp; Filter &nbsp;<b *ngIf="route.url !== '/'">{{route.url.toUpperCase().slice(1)}}</b><b *ngIf="route.url === '/'">DASHBOARD</b>&nbsp; Data
      </mat-panel-title>
    </mat-expansion-panel-header> -->

    <div class="row small-form p-3">
      <div class="row mx-auto">
        <div class="col-md-6 p-0">
          <h1 class="mb-0">Filter <b>{{route.url.toUpperCase().slice(1)}}</b> Data</h1>
        </div>
        <div class="col-md-6 p-0" style="text-align: right">
          <button mat-icon-button type="button" class="icon-btn me-auto" (click)="closeDialog()">
            <mat-icon class="clear-icon">clear</mat-icon>
          </button>
        </div>
      </div>
      <!-- //////////////////////////////////////////////////////////////// -->
      <!-- //////////////////////////////////////////////////////////////// -->
      <!-- //////////////////////////////////////////////////////////////// -->
      <!-- ///this is here to iniate the date ranges so the form can finish loading.  It does not display                     -->
      <!-- <app-monthpicker -->
      <!-- (monthRangeSelected)="smallForm.dateSelectorRange($event)" -->
      <!-- (rangeComplete)="smallForm.closeMonthPicker()" -->
      <!-- style="display: none" -->
      <!-- ></app-monthpicker> -->

      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************  GENERAL LAYOUT  ********************************************************* -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'extension'" class="p-3 pb-0">
        <!-- <mat-card-content class="content p-0"> -->
          <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">

            <div class="row wrapper-row">
              <div class="col-md-4" [style.display]="smallForm.showDateSelector ? 'block' : 'none'">
                <mat-card-content class="modified-mc-content" style="width: 100%">
                  <mat-expansion-panel class="small-form-panel-expansion"
                    [(expanded)]="smallForm.isMonthRangePickerExpanded">
                    <mat-expansion-panel-header class="small-form-layout-panel-header">
                      <mat-panel-description style="
                        color: rgba(0, 0, 0, 0.87);
                        display: block;
                        margin-top: -0.6rem;
                      ">
                        <div class="row" style="margin-bottom: -0.5rem !important">
                          <div class="col-md-4">
                            <span class="small-form-layout">Selected Date Range</span>
                          </div>
                        </div>
                        <div class="row my-auto">
                          <div class="col">
                            <span> {{ smallForm.dateRange }} </span>
                          </div>
                        </div>
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                      (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                  </mat-expansion-panel>
                </mat-card-content>

              </div>
              <div class="col-md-4">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Division</mat-label>
                  <mat-select formControlName="division" multiple>
                    <mat-option [value]="'full_fleet'" #AllDivisionSelected (click)="onAllDivisionSelected()">Full
                      Fleet</mat-option>
                    <div *ngIf="isLoading" class="col d-flex align-items-center justify-content-center"
                      style="height: 0.5%; text-align: center">
                      <mat-spinner></mat-spinner>
                    </div>
                    <mat-option *ngFor="let x of smallForm.allowedDivs" [value]="x.division"
                      (click)="onDivisionSelected()">
                      {{ x.division }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Branches</mat-label>
                  <mat-select formControlName="branch" multiple>
                    <mat-option [value]="'all_branches'" #AllBranchSelected (click)="onAllBranchSelected()">All
                      Branches</mat-option>

                    <mat-option *ngFor="let branches of smallForm.allowedBranches" [value]="branches.branch"
                      (click)="onBranchSelected()">
                      {{ branches.branch.branch }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-4">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em" *ngIf="showVehiclesTypes">
                  <mat-label>Vehicle Type</mat-label>
                  <mat-select formControlName="vehicleType" multiple>
                    <mat-option [value]="'all_veh_types'" #allTypesSelected (click)="onAllTypesSelected()">All
                      Types</mat-option>
                    <mat-option *ngFor="let veh of smallForm.allowedVehTypes" [value]="veh" (click)="onTypeSelected()">
                      {{ veh }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-4" *ngIf="route.url === '/supplier'">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Supplier</mat-label>
                  <mat-select formControlName="suppliers" multiple>
                    <mat-option [value]="'all_suppliers'" #allSupplierSelected (click)="onAllSupplierSelected()">All
                      Suppliers</mat-option>

                    <mat-option *ngFor="let sup of smallForm.allowedSuppliers" [value]="sup"
                      (click)="onSupplierSelected()">
                      {{ sup }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4" *ngIf="route.url === '/component-details'">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Component</mat-label>

                  <mat-select formControlName="components" multiple>
                    <mat-option [value]="'all_repair_maps'" #allComponentsSelected
                      (click)="onAllComponentsSelected()">All Components</mat-option>

                    <mat-option *ngFor="let repair_map of smallForm.allowedRepairMaps" [value]="repair_map"
                      (click)="onComponentsSelected()">
                      {{ repair_map }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-4" *ngIf="route.url !== '/component-details' && route.url !== '/supplier'"></div>
              <div class="col-md-4" *ngIf="route.url === '/fleetlist'"></div>
              <div class="col-md-4 mt-3 mb-2" style="text-align: right">
                <button mat-button style="border: 2px solid #36b6c3; border-radius: 50px; width: 8rem" type="submit"
                  [disabled]="!smallForm.canSubmit">
                  Submit
                </button>
              </div>

            </div>
          </form>
        <!-- </mat-card-content> -->
      </div>

      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- ///////////////////////////////////////////////////////////////// -->
      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************  EVENTS LAYOUT  ********************************************************* -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'events'" class="small-form-mat-card-general-form-holder">
        <!-- <mat-card-content class="pt-0"> -->
          <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">

            <div class="row wrapper-row mt-3">
              <div class="col-md-4 column2" [style.display]="smallForm.showDateSelector ? 'block' : 'none'">
                <mat-card-content class="modified-mc-content" style="width: 100%">
                  <mat-expansion-panel class="small-form-panel-expansion"
                    [(expanded)]="smallForm.isMonthRangePickerExpanded">
                    <mat-expansion-panel-header class="small-form-layout-panel-header">
                      <!-- <mat-panel-title > </mat-panel-title> -->

                      <mat-panel-description style="
                        color: rgba(0, 0, 0, 0.87);
                        display: block;
                        margin-top: -0.6rem;
                      ">
                        <div class="row" style="margin-bottom: -0.5rem !important">
                          <div class="col">
                            <span class="small-form-layout">Selected Date Range</span>
                          </div>
                        </div>
                        <div class="row my-auto">
                          <div class="col">
                            <span> {{ smallForm.dateRange }} </span>
                          </div>
                        </div>

                        <!-- <mat-icon>date_range</mat-icon> -->
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                      (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                  </mat-expansion-panel>
                </mat-card-content>
              </div>
              <div class="col-md-4 column2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Division</mat-label>
                  <mat-select formControlName="division" multiple>
                    <mat-option [value]="'full_fleet'" #AllDivisionSelected (click)="onAllDivisionSelected()">Full
                      Fleet</mat-option>
                    <div *ngIf="isLoading" class="col d-flex align-items-center justify-content-center"
                      style="height: 0.5%; text-align: center">
                      <mat-spinner></mat-spinner>
                    </div>
                    <mat-option *ngFor="let x of smallForm.allowedDivs" [value]="x.division"
                      (click)="onDivisionSelected()">
                      {{ x.division }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Branches</mat-label>
                  <mat-select formControlName="branch_single">
                    <mat-option *ngFor="let branches of smallForm.allowedBranches" [value]="branches.branch">
                      {{ branches.branch.branch }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2" *ngIf="showVehiclesTypes">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Vehicle Type</mat-label>
                  <mat-select formControlName="vehicleType" multiple>
                    <mat-option [value]="'all_veh_types'" #allTypesSelected (click)="onAllTypesSelected()">All
                      Types</mat-option>
                    <mat-option *ngFor="let veh of smallForm.allowedVehTypes" [value]="veh" (click)="onTypeSelected()">
                      {{ veh }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2" *ngIf="smallForm.showSupplierSelect">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Supplier</mat-label>
                  <mat-select formControlName="suppliers" multiple>
                    <mat-option [value]="'all_suppliers'" #allSupplierSelected (click)="onAllSupplierSelected()">All
                      Suppliers</mat-option>

                    <mat-option *ngFor="let sup of smallForm.allowedSuppliers" [value]="sup"
                      (click)="onSupplierSelected()">
                      {{ sup }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2" *ngIf="smallForm.showMaintenanceMaps">
                <!-- components  -->
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Component</mat-label>

                  <mat-select formControlName="components" multiple>
                    <mat-option [value]="'all_repair_maps'" #allComponentsSelected
                      (click)="onAllComponentsSelected()">All Components</mat-option>

                    <mat-option *ngFor="let repair_map of smallForm.allowedRepairMaps" [value]="repair_map"
                      (click)="onComponentsSelected()">
                      {{ repair_map }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2">

                <!-- vehicle registration  -->
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Asset</mat-label>
                  <mat-select formControlName="registrations" multiple>
                    <mat-option [value]="'all_registrations'" #allSelectedVehicleRegs
                      (click)="onAllVehicleRegsSelected()">All Assets</mat-option>
                    <mat-option *ngFor="let veh of smallForm.allowedVehicles" [value]="veh"
                      (click)="onVehicleRegSelected()">
                      {{ veh.fleet_no }} ({{ veh.vehiclereg }})
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-md-4 column2" style="text-align: right">
                <button mat-button style="border: 2px solid #36b6c3; border-radius: 50px; width: 8rem" type="submit"
                  [disabled]="!smallForm.canSubmit" class="mt-3">
                  Submit
                  <!-- <mat-icon class="clear-icon">clear</mat-icon> -->
                </button>
              </div>
            </div>
          </form>
        <!-- </mat-card-content> -->
      </div>

      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************* LAYOUT FOR ORDERS PAGE ************************************************** -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'orders'">
        <!-- <mat-card class="small-form-card-orders-form-holder p-4">
          <mat-card-content class="p-0"> -->
        <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">
          <div class="row p-2">
            <div class="col-md-4" [style.display]="smallForm.showDateSelector ? 'block' : 'none'">
              <mat-card-content class="modified-mc-content pt-0" style="width: 100%">
                <mat-expansion-panel class="small-form-panel-expansion"
                  [(expanded)]="smallForm.isMonthRangePickerExpanded">
                  <mat-expansion-panel-header class="small-form-layout-panel-header">
                    <mat-panel-description style="
                      color: rgba(0, 0, 0, 0.87);
                      display: block;
                      margin-top: -0.6rem;
                    ">
                      <div class="row" style="margin-bottom: -0.5rem !important">
                        <div class="col-md-4">
                          <span class="small-form-layout">Selected Date Range</span>
                        </div>
                      </div>
                      <div class="row my-auto">
                        <div class="col">
                          <span> {{ smallForm.dateRange }} </span>
                        </div>
                      </div>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                    (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                </mat-expansion-panel>
              </mat-card-content>
            </div>

            <div class="col-md-4 mx-auto my-auto">
              <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                <mat-label>Division</mat-label>
                <mat-select formControlName="division" multiple>
                  <mat-option [value]="'full_fleet'" #AllDivisionSelected>Full
                    Fleet</mat-option>
                  <div *ngIf="isLoading" class="col d-flex align-items-center justify-content-center"
                    style="height: 0.5%; text-align: center">
                    <mat-spinner></mat-spinner>
                  </div>
                  <mat-option *ngFor="let x of smallForm.allowedDivs" [value]="x.division"
                    (click)="onDivisionSelected()">
                    {{ x.division }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-4 mx-auto my-auto">
              <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                <mat-label>Branches</mat-label>
                <mat-select formControlName="branch_single">
                  <mat-option *ngFor="let branches of smallForm.allowedBranches" [value]="branches.branch">
                    {{ branches.branch.branch }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
            <div class="col-md-4 column2" style="text-align: right">
              <button mat-button style="border: 2px solid #36b6c3; border-radius: 50px; width: 8rem" type="submit"
                [disabled]="!smallForm.canSubmit" class="mt-2 mb-2">
                Submit
              </button>
            </div>

          </div>
        </form>
        <!-- </mat-card-content>
        </mat-card> -->
      </div>

      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************  LAYOUT FOR REPORTS PAGE  ************************************************ -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'reports'">
        <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">
          <div class="row p-3">
            <div class="col-md-4 mx-auto date-picker">
              <!-- <mat-card-content class="modified-mc-content" style="width: 98%"
                [style.display]="smallForm.showDateSelector ? 'block' : 'none'"> -->
                <mat-expansion-panel class="small-form-panel-expansion"
                  [(expanded)]="smallForm.isMonthRangePickerExpanded">
                  <mat-expansion-panel-header class="small-form-layout-panel-header">
                    <!-- <mat-panel-title > </mat-panel-title> -->

                    <mat-panel-description style="
                    color: rgba(0, 0, 0, 0.87);
                    display: block;
                    margin-top: -0.6rem;
                  ">
                      <div class="row" style="margin-bottom: -0.5rem !important;">
                        <div class="col">
                          <span class="small-form-layout">Selected Date Range</span>
                        </div>
                      </div>
                      <div class="row my-auto">
                        <div class="col">
                          <span> {{ smallForm.dateRange }} </span>
                        </div>
                      </div>

                      <!-- <mat-icon>date_range</mat-icon> -->
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                    class="mat-datepicker-content" (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                </mat-expansion-panel>
              <!-- </mat-card-content> -->
            </div>
            <div class="col-md-4 p-0">
              <div class="row">
                <mat-form-field appearance="fill" style="width: 100%; height: 78px;" id="test">
                  <mat-label>Report Type</mat-label>
                  <mat-select formControlName="reportType">
                    <mat-option
                      *ngFor="let type of smallForm.reportTypes"
                      [value]="type.reportTitle"
                    ><span>
                      {{ type.reportTitle }}
                    </span>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>

            <!-- <div class="col-md-4"></div> -->
            <div class="col-md-4 mx-auto text-center mb-2 btn-column">
              <button mat-button class="sub-btn" [disabled]="!smallForm.canSubmit" type="button"
                (click)="smallForm.onDownloadReport()">
                Download
              </button>
            </div>
          </div>

        </form>
      </div>

      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************  LAYOUT FOR PER ASSET VIEW *********************************************** -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'pav'" class="small-form-mat-card-general-form-holder">
        <!-- <mat-card-content class="pt-0"> -->
          <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">


            <div class="row pt-3">
              <div class="col-md-4" [style.display]="smallForm.showDateSelector ? 'block' : 'none'">
                <mat-card-content class="modified-mc-content" style="width: 100%">
                  <mat-expansion-panel class="small-form-panel-expansion"
                    [(expanded)]="smallForm.isMonthRangePickerExpanded">
                    <mat-expansion-panel-header class="small-form-layout-panel-header">
                      <mat-panel-description style="
                        color: rgba(0, 0, 0, 0.87);
                        display: block;
                        margin-top: -0.6rem;
                      ">
                        <div class="row" style="margin-bottom: -0.5rem !important">
                          <div class="col-md-4">
                            <span class="small-form-layout">Selected Date Range</span>
                          </div>
                        </div>
                        <div class="row my-auto">
                          <div class="col">
                            <span> {{ smallForm.dateRange }} </span>
                          </div>
                        </div>
                      </mat-panel-description>
                    </mat-expansion-panel-header>
                    <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                      (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                  </mat-expansion-panel>
                </mat-card-content>
              </div>

              <div class="col-md-4">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em"
                  *ngIf="smallForm.showSupplierSelect">
                  <mat-label>Supplier</mat-label>
                  <mat-select formControlName="suppliers" multiple>
                    <mat-option [value]="'all_suppliers'" #allSupplierSelected (click)="onAllSupplierSelected()">All
                      Suppliers</mat-option>

                    <mat-option *ngFor="let sup of smallForm.allowedSuppliers" [value]="sup"
                      (click)="onSupplierSelected()">
                      {{ sup }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-4">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em"
                  *ngIf="smallForm.showMaintenanceMaps">
                  <mat-label>Component</mat-label>

                  <mat-select formControlName="components" multiple>
                    <mat-option [value]="'all_repair_maps'" #allComponentsSelected
                      (click)="onAllComponentsSelected()">All Components</mat-option>

                    <mat-option *ngFor="let repair_map of smallForm.allowedRepairMaps" [value]="repair_map"
                      (click)="onComponentsSelected()">
                      {{ repair_map }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <h2 class="form-select-header" style="margin-bottom: -0.5rem !important">
                Asset Lookup
              </h2>

              <div class="col-md-2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Division</mat-label>
                  <mat-select formControlName="division" multiple>
                    <mat-option [value]="'full_fleet'" #AllDivisionSelected (click)="onAllDivisionSelected()">Full
                      Fleet</mat-option>
                    <div *ngIf="isLoading" class="col d-flex align-items-center justify-content-center"
                      style="height: 0.5%; text-align: center">
                      <mat-spinner></mat-spinner>
                    </div>
                    <mat-option *ngFor="let x of smallForm.allowedDivs" [value]="x.division"
                      (click)="onDivisionSelected()">
                      {{ x.division }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Branches</mat-label>
                  <mat-select formControlName="branch" multiple>
                    <mat-option [value]="'all_branches'" #AllBranchSelected (click)="onAllBranchSelected()">All
                      Branches</mat-option>

                    <mat-option *ngFor="let branches of smallForm.allowedBranches" [value]="branches.branch"
                      (click)="onBranchSelected()">
                      {{ branches.branch.branch }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em" *ngIf="showVehiclesTypes">
                  <mat-label>Vehicle Type</mat-label>
                  <mat-select formControlName="vehicleType" multiple>
                    <mat-option [value]="'all_veh_types'" #allTypesSelected (click)="onAllTypesSelected()">All
                      Types</mat-option>
                    <mat-option *ngFor="let veh of smallForm.allowedVehTypes" [value]="veh" (click)="onTypeSelected()">
                      {{ veh }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="col-md-2">
                <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                  <mat-label>Asset</mat-label>
                  <input matInput formControlName="pavRegs" [matAutocomplete]="autoAllRegs"
                    (click)="smallForm.clearSingleReg($event)" (input)="smallForm.filteredPavRegsDD($event)" />
                  <mat-autocomplete #autoAllRegs="matAutocomplete"
                    (optionSelected)="smallForm.selectedPavRegsDD($event)">
                    <mat-option *ngFor="let veh of smallForm.filteredPavRegs" [value]="veh">
                      {{ veh.fleet_no + " (" + veh.vehiclereg + ")" }}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </div>

              <div class="col mt-3" style="text-align: right">
                <button mat-button style="border: 2px solid #36b6c3; border-radius: 50px; width: 8rem" type="submit"
                  [disabled]="!smallForm.canSubmit">
                  Submit
                </button>
              </div>
            </div>
          </form>
        <!-- </mat-card-content> -->
      </div>

      <!-- *********************************************************************************************************************** -->
      <!-- ********************************************* DOWNTIME PAGE ************************************************** -->
      <!-- *********************************************************************************************************************** -->

      <div *ngIf="smallForm.formPage === 'downtime'">
        <form [formGroup]="smallForm.form" (ngSubmit)="smallForm.onSubmit()">
          <div class="row mx-auto mt-3">
            <div class="col-md-4 column-downtime" [style.display]="smallForm.showDateSelector ? 'block' : 'none'">
              <mat-card-content class="modified-mc-content" style="width: 100%">
                <mat-expansion-panel class="small-form-panel-expansion"
                  [(expanded)]="smallForm.isMonthRangePickerExpanded">
                  <mat-expansion-panel-header class="small-form-layout-panel-header">
                    <mat-panel-description style="
                      color: rgba(0, 0, 0, 0.87);
                      display: block;
                      margin-top: -0.6rem;
                    ">
                      <div class="row" style="margin-bottom: -0.5rem !important">
                        <div class="col-md-4">
                          <span class="small-form-layout">Selected Date Range</span>
                        </div>
                      </div>
                      <div class="row my-auto">
                        <div class="col">
                          <span> {{ smallForm.dateRange }} </span>
                        </div>
                      </div>
                    </mat-panel-description>
                  </mat-expansion-panel-header>
                  <app-monthpicker (monthRangeSelected)="smallForm.dateSelectorRange($event)"
                    (rangeComplete)="smallForm.closeMonthPicker()"></app-monthpicker>
                </mat-expansion-panel>
              </mat-card-content>
            </div>
            <div class="col-md-4 mx-auto">
              <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                <mat-label>Division</mat-label>
                <mat-select formControlName="division" multiple>
                  <mat-option [value]="'full_fleet'" #AllDivisionSelected (click)="onAllDivisionSelected()">Full
                    Fleet</mat-option>
                  <div *ngIf="isLoading" class="col d-flex align-items-center justify-content-center"
                    style="height: 0.5%; text-align: center">
                    <mat-spinner></mat-spinner>
                  </div>
                  <mat-option *ngFor="let x of smallForm.allowedDivs" [value]="x.division"
                    (click)="onDivisionSelected()">
                    {{ x.division }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-4 col-downtime">
              <mat-form-field appearance="fill" style="width: 100%; margin-bottom: -0.7em">
                <mat-label>Branches</mat-label>
                <mat-select formControlName="branch_single">
                  <mat-option *ngFor="let branches of smallForm.allowedBranches" [value]="branches.branch">
                    {{ branches.branch.branch }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-md-4"></div>
            <div class="col-md-4"></div>
            <div class="col-md-4 mt-2 mb-2 col-downtime" style="text-align: right">
              <button mat-button style="border: 2px solid #36b6c3; border-radius: 50px; width: 8rem" type="submit"
                [disabled]="!smallForm.canSubmit">
                Submit
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

  <!-- </mat-expansion-panel>
</mat-accordion> -->
